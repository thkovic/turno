<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sistema Passagem de Turno</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:20px; background:#f5f5f5; }
.container { max-width:800px; margin:0 auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
h1 { text-align:center; color:#2d6a4f; }
form { display:grid; grid-template-columns:1fr 1fr; gap:15px; }
form label { font-weight:bold; }
form input, form textarea, form select { padding:8px; border-radius:4px; border:1px solid #ccc; width:100%; box-sizing:border-box; }
form textarea { resize: vertical; min-height:60px; }
.full-width { grid-column:1/-1; }
button { background-color:#95d5b2; color:#fff; border:none; padding:10px; border-radius:4px; cursor:pointer; transition:0.3s; }
button:hover { background-color:#74c69d; }
button:disabled { background-color:#ccc; cursor:not-allowed; }
.alert { margin-top:10px; padding:10px; border-radius:4px; }
.success { background:#d4edda; color:#155724; border:1px solid #c3e6cb; }
.error { background:#f8d7da; color:#721c24; border:1px solid #f5c6cb; }
</style>
</head>
<body>
<div class="container">
<h1>üìù Sistema de Passagem de Turno</h1>

<div class="alert info">
üí° Preencha os dados abaixo para registrar a passagem de turno.
</div>

<form id="turnoForm">
<div>
<label>Data *</label>
<input type="date" id="data" required/>
</div>
<div>
<label>Nome do Operador *</label>
<input type="text" id="nome" required/>
</div>
<div>
<label>Matr√≠cula *</label>
<input type="text" id="matricula" required/>
</div>
<div>
<label>Equipamento *</label>
<input type="text" id="equipamento" required/>
</div>
<div>
<label>Acionamento (HH:mm)</label>
<input type="time" id="acionamento"/>
</div>
<div class="full-width">
<label>Problema Identificado *</label>
<textarea id="problema" required></textarea>
</div>
<div class="full-width">
<label>Solu√ß√£o Aplicada *</label>
<textarea id="solucao" required></textarea>
</div>
<div>
<label>Encerramento (HH:mm)</label>
<input type="time" id="encerramento"/>
</div>
<div class="full-width">
<button type="submit" id="btnSubmit">‚úÖ Registrar Passagem de Turno</button>
</div>
</form>

<p id="status"></p>

<script>
const SCRIPT_URL = "COLE_AQUI_O_SEU_URL_DO_WEB_APP";

document.getElementById("turnoForm").addEventListener("submit", async function(e){
    e.preventDefault();
    const btn = document.getElementById("btnSubmit");
    btn.disabled = true;
    btn.textContent = "Registrando...";

    const data = {
        data: document.getElementById("data").value.trim(), // ‚úÖ Data exatamente como digitada
        nome: document.getElementById("nome").value.trim(),
        matricula: document.getElementById("matricula").value.trim(),
        equipamento: document.getElementById("equipamento").value.trim(),
        acionamento: document.getElementById("acionamento").value.trim(),
        problema: document.getElementById("problema").value.trim(),
        solucao: document.getElementById("solucao").value.trim(),
        encerramento: document.getElementById("encerramento").value.trim()
    };

    try {
        const resp = await fetch(SCRIPT_URL, {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify(data)
        });

        const result = await resp.json();

        if(result.success){
            document.getElementById("status").innerHTML = `<div class="alert success">‚úÖ ${result.message} | Data registrada: ${result.data_registrada}</div>`;
            // Limpar campos ap√≥s registro
            document.getElementById("turnoForm").reset();
        } else {
            document.getElementById("status").innerHTML = `<div class="alert error">‚ùå Erro: ${result.message}</div>`;
        }
    } catch(err){
        document.getElementById("status").innerHTML = `<div class="alert error">‚ùå Erro de conex√£o: ${err}</div>`;
    } finally {
        btn.disabled = false;
        btn.textContent = "‚úÖ Registrar Passagem de Turno";
    }
});
</script>
</div>
</body>
</html>
