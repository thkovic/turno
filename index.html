<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Teste Sistema Login</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        button { padding: 10px; margin: 5px; }
        .success { background: #d4edda; color: #155724; padding: 10px; margin: 10px 0; }
        .error { background: #f8d7da; color: #721c24; padding: 10px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ðŸ§ª Teste Sistema Login</h1>
    
    <button onclick="teste1()">1. Testar ConexÃ£o</button>
    <button onclick="teste2()">2. Criar UsuÃ¡rio Teste</button>
    <button onclick="teste3()">3. Testar Login (81057898)</button>
    <button onclick="teste4()">4. Ver Dados Planilha</button>
    
    <div id="result"></div>

<script>
const URL = "https://script.google.com/macros/s/AKfycbwFS6gRrIGYeWFZ9KYjSaOMLfJd_TTsrZcLNGyvdb7R0RZBcXrQUlgLUdAjNr7B58o/exec";

async function post(dados) {
    const resp = await fetch(URL, {
        method: 'POST',
        body: JSON.stringify(dados)
    });
    return await resp.json();
}

function mostrar(texto, tipo = '') {
    const div = document.getElementById('result');
    const elemento = document.createElement('div');
    elemento.className = tipo;
    elemento.innerHTML = `<pre>${JSON.stringify(texto, null, 2)}</pre>`;
    div.appendChild(elemento);
}

async function teste1() {
    const r = await fetch(URL);
    const d = await r.json();
    mostrar(d, d.status === 'ok' ? 'success' : 'error');
}

async function teste2() {
    const r = await post({
        cadastrar: true,
        nome: "Usuario Teste Novo",
        matricula: "TESTE" + Date.now()
    });
    mostrar(r, r.success ? 'success' : 'error');
}

async function teste3() {
    const r = await post({
        login: true,
        matricula: "81057898"
    });
    mostrar(r, r.success ? 'success' : 'error');
}

async function teste4() {
    const r = await post({
        getHistory: true
    });
    if (Array.isArray(r)) {
        mostrar({
            registros_encontrados: r.length,
            primeiros_3: r.slice(0, 3)
        }, 'success');
    } else {
        mostrar(r, 'error');
    }
}
</script>
</body>
</html>
